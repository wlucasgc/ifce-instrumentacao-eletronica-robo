//=======================================================================================================================
//BIBLIOTECAS
//=======================================================================================================================

#include "MyServo.h"

//=======================================================================================================================
//CONSTRUTOR
//=======================================================================================================================

MyServo::MyServo(int pino) {
    _pino = pino;
    _anguloAtual = getAngulo();
    _anguloDesejado = _anguloAtual;
    _anguloAtingido = true;
    
    servo.attach(_pino);
}

//=======================================================================================================================
//RETORNA O ÂNGULO ATUAL DO SERVO
//=======================================================================================================================

int MyServo::getAngulo() {
    _anguloAtual = servo.read();
    return(_anguloAtual);
}

//=======================================================================================================================
//DEFINE O ÂNGULO PARA QUAL O SERVO DEVE SE MOVER
//=======================================================================================================================

void MyServo::setAngulo(int angulo) {
    _anguloDesejado = angulo;
    _anguloAtingido = false;
}

//=======================================================================================================================
//FUNÇÃO A SER INCLUIDA NO LOOP
//=======================================================================================================================

void MyServo::loop(int angulo) {
    int anguloAtual;
    
    anguloAtual = getAngulo();

    if(anguloAtual < angulo) {
        do {
            anguloAtual++;
            servo.write(anguloAtual);
            delay(10);
        }
        while(anguloAtual != angulo);
    }

    if(anguloAtual > angulo) {
        do {
            anguloAtual--;
            servo.write(anguloAtual);
            delay(10);
        } 
        while(anguloAtual != angulo);
    }
}

//=======================================================================================================================
